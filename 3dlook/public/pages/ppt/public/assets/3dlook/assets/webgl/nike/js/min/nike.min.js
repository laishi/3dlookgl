function _nikeApp() {
    this.continueloadingdetail = !0,
    this.topCameraY = 1100,
    this.doPostProcess = !0,
    this.postProc = null,
    this.controls = null,
    this.stats = null,
    this.renderer = null,
    this.composer = null,
    this.composerEffects = null,
    this.sceneTexturePass = null,
    this.particleMaterial2 = null,
    this.particleMaterial = null,
    this.detailObjectScale = 1.3,
    this.detailAnimScale = 1,
    this.animationRunning = !0,
    this.doRotateZoetrope = !1,
    this.detailFrameCount = 0,
    this.seqLinesMaterial = null,
    this.seqDarkLinesMaterial = null,
    this.emptyDetailModel = !1,
    this.loadingCircleFG = null,
    this.loadingCircleBG = null,
    this.rotationSpeed = 0,
    this.flare_bottom = null,
    this.flare_top = null,
    this.objBG = null,
    this.timeRunning = 0,
    this.timeRunningSeconds = 0,
    this.timeRunnimgStart = 0,
    this.sequencerDisplay = null,
    this.scene = null,
    this.sceneOverlay = null,
    this.sceneBG = null,
    this.cameraOverlay = null,
    this.cameraBG = null,
    this.shoeGroups = null,
    this.glContainer = null,
    this.firstRotateTime = 0,
    this.ui = null,
    this.camera = void 0,
    this.camtarget = {
        x: 0,
        y: 0,
        z: 0
    },
    this.detailPosition = new THREE.Vector3(0, -390, 0),
    this.defaultTarget = new THREE.Vector3(0, -10, 10),
    this.camDefaultPosition = new THREE.Vector3(900, 0, .1),
    this.detailCameraPos = new THREE.Vector3(0, 0, 0),
    this.detailObject = null,
    this.detailAnim = null,
    this.scrolledDown = !1,
    this.particles = [],
    this.detailShoeIndex = 0,
    this.bgDetailMaterial = null,
    this.bgDetailPreviewMaterial = null,
    this.titles = ["NIKE SOCK RACER", "NIKE AIR RIFT", "NIKE AIR PRESTO", "NIKE FREE 5.0 OG", "NIKE FREE RUN+2", "NIKE FREE 3.0 FLYKNIT", "NIKE FREE RUN 5.0"],
    this.init = function() {
        this.ui = new nikeUI,
        nike.ui.setInteraction(!1),
        this.ui.init(),
        this.sequencerDisplay = new SequencerDisplay,
        this.shoeGroups = [],
        nike.seqLinesMaterial = new THREE.LineBasicMaterial({
            color: 8947848,
            linewidth: 1,
            transparent: !0,
            opacity: 0,
            depthWrite: !1
        }),
        nike.seqDarkLinesMaterial = new THREE.LineBasicMaterial({
            color: 4473924,
            linewidth: 1,
            transparent: !0,
            opacity: 0,
            depthWrite: !1
        }),
        myResize(),
        this.ui.showInstructions(),
        this.glContainer = document.createElement("div"),
        this.glContainer.id = "webGlContainer",
        $("#render").append(this.glContainer);
        for (var e = 0; e < conf.numShoeGroups; e++) nike.shoeGroups[e] = new THREE.Object3D;
        this.cameraOverlay = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, .1, 1e4),
        this.cameraOverlay.position = new THREE.Vector3(699.9999999991869, 306.6235515989139, 3.346499327101487),
        this.cameraOverlay.target = new THREE.Vector3(0, 0, 0),
        this.camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 1, 3e4),
        this.camera.position = new THREE.Vector3(1, 1, 110),
        this.camera.target = new THREE.Vector3(0, 0, 0),
        this.controls = new THREE.OrbitControls(this.camera),
        nike.ui.setInteraction(!1),
        nike.setRotationZoetrope(0),
        loader.initLoadingScene(),
        requestAnimationFrame(renderLoading),
        loader.startLoading(),
        this.renderer = new THREE.WebGLRenderer({
            antialias: !1,
            alpha: !0
        }),
        this.renderer.setSize(window.innerWidth, window.innerHeight),
        this.renderer.gammaInput = !1,
        this.renderer.gammaOutput = !1,
        this.renderer.setClearColor(0, 0),
        this.renderer.autoClear = !1,
        this.glContainer.appendChild(this.renderer.domElement),
        this.glContainer.onclick = this.ui.MouseClickHandler,
        this.glContainer.onmousedown = this.ui.MouseDownHandler,
        this.glContainer.onmouseup = this.ui.MouseUpHandler,
        this.glContainer.onmouseout = this.ui.MouseUpHandler,
        this.glContainer.onmousemove = this.ui.MouseMoveHandler,
        this.glContainer.onmousewheel = this.ui.MouseWheelHandler,
        document.onkeypress = this.ui.KeyHandler,
        $("#shoe-details").mousemove(nike.ui.MouseMoveHandlerDetail),
        window.onbeforeunload = function() {},
        $(window).resize(function() {
            myResize()
        })
    },
    this.start = function(e) {
        started = !0,
        myResize(),
        this.sceneOverlay = new THREE.Scene,
        this.sceneBG = new THREE.Scene,
        this.cameraBG = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 1, 3e4),
        this.cameraBG.position = new THREE.Vector3(0, 0, 100),
        this.cameraBG.target = new THREE.Vector3(0, 0, 0),
        this.bgDetailMaterial = new THREE.MeshBasicMaterial({
            color: 16777215,
            map: loader.getAsset("bgdetail"),
            transparent: !0,
            opacity: 0,
            size: 300,
            side: THREE.DoubleSide,
            depthWrite: !1,
            depthTest: !1
        });
        var i = new THREE.PlaneGeometry(66, 120);
        this.bgdetail = new THREE.Mesh(i, this.bgDetailMaterial),
        this.sceneBG.add(this.bgdetail),
        this.bgDetailPreviewMaterial = new THREE.MeshBasicMaterial({
            color: 16777215,
            map: loader.getAsset("detailpreview0"),
            transparent: !0,
            opacity: 0,
            side: THREE.DoubleSide,
            depthWrite: !1,
            depthTest: !1
        });
        var t = new THREE.PlaneGeometry(62, 28);
        this.detailpreview = new THREE.Mesh(t, this.bgDetailPreviewMaterial),
        this.detailpreview.position.z = 10,
        this.sceneBG.add(this.detailpreview),
        nike.shoeGroups[0].position.y += .2,
        nike.shoeGroups[1].position.y += 1.1,
        nike.shoeGroups[2].position.y += .35,
        nike.shoeGroups[3].position.y += .07,
        nike.shoeGroups[4].position.y += .35,
        this.ui.hideInstructions();
        var n = {
            minFilter: THREE.LinearFilter,
            magFilter: THREE.LinearFilter,
            format: THREE.RGBAFormat,
            stencilBufer: !1
        },
        a = new THREE.WebGLRenderTarget(window.innerWidth, window.innerHeight, n);
        this.composer = new THREE.EffectComposer(this.renderer, a);
        var r = new THREE.RenderPass(this.sceneBG, this.cameraBG);
        r.clear = !0;
        var o = new THREE.RenderPass(this.scene, this.camera),
        s = new THREE.RenderPass(this.sceneOverlay, this.camera);
        r.clear = !0,
        o.clear = !1,
        s.clear = !1,
        this.composer.addPass(r),
        this.composer.addPass(o),
        this.composer.addPass(s),
        this.sceneTexturePass = new THREE.TexturePass(this.composer.renderTarget2),
        this.composerEffects = new THREE.EffectComposer(this.renderer, new THREE.WebGLRenderTarget(window.innerWidth, window.innerHeight, n)),
        this.composerEffects.addPass(this.sceneTexturePass),
        this.postProc = new THREE.ShaderPass(THREE.RGBShiftShader),
        this.postProc.clearColor = !1,
        this.postProc.renderToScreen = !1,
        this.postProc.uniforms.noise.value = .5,
        this.composerEffects.addPass(this.postProc),
        this.dpr = 1,
        void 0 !== window.devicePixelRatio && (this.dpr = window.devicePixelRatio),
        this.effectFXAA = new THREE.ShaderPass(THREE.FXAAShader),
        this.effectFXAA.uniforms.resolution.value.set(1 / (window.innerWidth * this.dpr), 1 / (window.innerHeight * this.dpr)),
        this.effectFXAA.renderToScreen = !0,
        this.composerEffects.addPass(this.effectFXAA),
        $("#logo_claim").css({
            display: "block",
            bottom: "-50px",
            opacity: 0
        },
        420),
        $("#logo_claim").stop(!0).animate({
            bottom: "50px",
            opacity: 1
        },
        420);
        var l = new THREE.MeshBasicMaterial({
            color: 16777215,
            map: loader.getAsset("flare_bottom"),
            transparent: !0,
            size: 1,
            side: THREE.DoubleSide,
            depthWrite: !1,
            depthTest: !1,
            blending: THREE.AdditiveBlending,
            transparent: !0,
            opacity: 0
        }),
        t = new THREE.PlaneGeometry(200, 150);
        this.flare_bottom = new THREE.Mesh(t, l),
        nike.sceneOverlay.add(this.flare_bottom);
        var d = new THREE.MeshBasicMaterial({
            color: 16777215,
            map: loader.getAsset("flare_top"),
            transparent: !0,
            size: 1,
            side: THREE.DoubleSide,
            depthWrite: !1,
            depthTest: !1,
            blending: THREE.AdditiveBlending,
            transparent: !0,
            opacity: 0
        }),
        t = new THREE.PlaneGeometry(200, 150);
        this.flare_top = new THREE.Mesh(t, d),
        nike.sceneOverlay.add(this.flare_top);
        for (var c = 0; c < conf.numShoeGroups; c++) {
            this.ui.collisionAreasMaterial[c] = new THREE.MeshBasicMaterial({
                color: 255
            });
            for (var u = 0; u < conf.numShoeSteps; u++) {
                var p = this.scene.getObjectByName("Collision_" + c + "_" + u, !0);
                void 0 !== p && (p.material = this.ui.collisionAreasMaterial[c], p.visible = !1, this.ui.pickingArrayAreas.push(p))
            }
        }
        this.ui.pickingArrayAreas.push(this.scene.getObjectByName("Collision_top", !0)),
        this.scene.getObjectByName("Collision_top", !0).visible = !1;
        for (var c = 100; 120 > c; c++) {
            var p = this.scene.getObjectByName("DarkLines_" + c, !0);
            if (void 0 !== p) {
                var m = new THREE.Line(p.geometry, nike.seqDarkLinesMaterial);
                this.scene.add(m),
                m.visible = !0
            }
        }
        for (var c = 100; 300 > c; c++) {
            var p = this.scene.getObjectByName("Lines_" + c, !0);
            if (void 0 !== p) {
                var m = new THREE.Line(p.geometry, nike.seqLinesMaterial);
                this.scene.add(m),
                m.visible = !0
            }
        } {
            var h = new THREE.Geometry,
            E = new THREE.Geometry;
            new THREE.Geometry
        }
        this.particleMaterial = new THREE.ShaderMaterial({
            uniforms: {
                size: {
                    type: "f",
                    value: 180
                },
                off: {
                    type: "f",
                    value: 1
                },
                time: {
                    type: "f",
                    value: 0
                },
                alpha: {
                    type: "f",
                    value: 0
                },
                tex: {
                    type: "t",
                    value: loader.getAsset("particle")
                }
            },
            vertexShader: document.getElementById("particle-vs").textContent,
            fragmentShader: document.getElementById("particle-fs").textContent,
            wrapping: THREE.ClampToEdgeWrapping,
            shading: THREE.SmoothShading,
            side: THREE.DoubleSide,
            transparent: !0,
            depthWrite: !1
        }),
        this.particleMaterial2 = this.particleMaterial.clone(),
        this.particleMaterial2.uniforms.tex.value = loader.getAsset("particle2"),
        this.particleMaterial2.uniforms.size.value = 800,
        this.particleMaterial2.uniforms.alpha.value = 0;
        for (var k = 0; 300 > k; k++) {
            var g = 2500 * Math.random() + 287.02,
            f = 360 * Math.random() * DEG2RAD,
            T = Math.cos(f) * g,
            _ = 313 * (Math.random() - .5),
            w = Math.sin(f) * g,
            R = new THREE.Vector3(T, _, w);
            h.vertices.push(R)
        }
        for (var k = 0; 20 > k; k++) {
            var g = 300 * Math.random() + 287.02,
            f = 360 * Math.random() * DEG2RAD,
            T = Math.cos(f) * g,
            _ = 150 * (Math.random() - .5),
            w = Math.sin(f) * g,
            R = new THREE.Vector3(T, _, w);
            E.vertices.push(R)
        }
        nike.particleSystem = new THREE.ParticleSystem(h, this.particleMaterial),
        nike.particleSystem2 = new THREE.ParticleSystem(E, this.particleMaterial2),
        this.scene.add(nike.particleSystem),
        this.scene.add(nike.particleSystem2);
        for (var g = 1100,
        c = 0; c <= conf.numShoeSteps / 2; c++) {
            var f = 22.5 * c * DEG2RAD,
            T = Math.cos(f) * g,
            _ = Math.sin(f) * g,
            S = new THREE.PlaneGeometry(65, 135),
            v = new THREE.MeshBasicMaterial({
                color: 16777215,
                map: loader.getAsset("spotlight"),
                transparent: !0,
                side: THREE.DoubleSide,
                depthTest: !0,
                depthWrite: !1,
                blending: THREE.AdditiveBlending
            }),
            M = new THREE.Mesh(S, v);
            M.position = new THREE.Vector3(T, 10, _),
            M.rotation.y = 90 * DEG2RAD + -f,
            this.scene.add(M)
        }
        nike.sequencerDisplay.init(),
        sequencer.sequencer_currentMaxGroup = e ? 8 : 0,
        sequencer.setPadValues(.5, .5),
        nike.sortShoes();
        var y = "McSAxIHEgsSDxIAwxIbEhMSIxInEisSLxITEhsSOxIfEgsSOxJEwxIHElDHElsSUxIfEj8SaxJvEncSexJ/EnMSgxI/El8SixKXEmcSmxJDEpMSnxKvEqsStxJLEkjE=";
        QueryString.c && (y = QueryString.c),
        nike.sequencerDisplay.clearSequencerMaterials(),
        nike.sequencerDisplay.load(y),
        requestAnimationFrame(this.render),
        this.setShoePositions();
        for (var c = 32; c < nike.shoeGroups[0].children.length; c++) {
            var p = nike.shoeGroups[0].children[c];
            void 0 != nike.shoeGroups[0].children[c - 32] && (p.rotation = nike.shoeGroups[0].children[c - 32].rotation, p.position = nike.shoeGroups[0].children[c - 32].position)
        }
        nike.ui.lastDrag = Date.now();
        for (var c = 0; c < conf.numShoeGroups; c++) nike.sequencerDisplay.switchSequencerGroup(c, !1);
        setTimeout(function() {
            e ? nike.setMode(MODE_INTRO) : nike.setMode(MODE_DEFAULT),
            nike.scene.remove(nike.loadingCircleBG),
            new TWEEN.Tween(nike.loadingCircleFG.material).to({
                opacity: 0
            },
            1500).easing(TWEEN.Easing.Cubic.Out).onComplete(function() {
                nike.scene.remove(nike.loadingCircleFG),
                new TWEEN.Tween(nike.particleMaterial2.uniforms.alpha).to({
                    value: .1
                },
                1e3).easing(TWEEN.Easing.Cubic.Out).start(),
                new TWEEN.Tween(nike.particleMaterial.uniforms.alpha).to({
                    value: 1
                },
                1e3).easing(TWEEN.Easing.Cubic.Out).start(),
                new TWEEN.Tween(nike.flare_top.material).to({
                    opacity: .6
                },
                1e3).easing(TWEEN.Easing.Cubic.Out).start(),
                new TWEEN.Tween(nike.flare_bottom.material).to({
                    opacity: .6
                },
                1e3).easing(TWEEN.Easing.Cubic.Out).start();
                for (var e = 0; e < conf.numShoeGroups; e++) nike.sequencerDisplay.switchSequencerGroup(e, !1)
            }).start()
        },
        900),
        QueryString.s ? setTimeout(function() {
            nike.ui.setInteraction(!0);
            var e = parseInt(QueryString.s);
            e > 0 && 7 > e && (modeSettings.currentShoeGroup = e, nike.setMode(MODE_DETAIL))
        },
        3600) : QueryString.c && setTimeout(function() {
            nike.ui.setInteraction(!0),
            sequencer.sequencer_currentMaxGroup = 8,
            nike.ui.playCounter = 1,
            nike.ui.didPlay++,
            nike.ui.togglePlay(),
            nike.ui.sequencer()
        },
        3600),
        setTimeout(nike.ui.showPlayPrompt, 5e3),
        setTimeout(nike.ui.showSequencerPrompt, 9e3)
    },
    this.showZoetrope = function(e) {
        for (var i = 0; i < this.shoeGroups.length; i++) for (var t = 0; t < this.shoeGroups[i].children.length; t++) this.shoeGroups[i].children[t].visible = e
    },
    this.scaleShoeAnim = function(e) {
        for (var i = 0; i < this.shoeGroups.length; i++) for (var t = 0; t < this.shoeGroups[i].children.length; t++) if (i != modeSettings.currentShoeGroup) {
            new TWEEN.Tween(this.shoeGroups[i].children[t].scale).to({
                x: e,
                y: e,
                z: e
            },
            1e3).easing(TWEEN.Easing.Cubic.InOut).start()
        }
    },
    this.sortShoes = function() {
        for (var e = 0; e < conf.numShoeGroups; e++) this.shoeGroups[e].children.sort(function(e, i) {
            return e.item1 === i.item1 ? e.name - i.name: void 0
        })
    },
    this.setShoePositions = function() {},
    this.getCurrentFrame = function() {
        return Math.floor((Date.now() - nike.firstRotateTime) / 83) % 32 * nike.rotationSpeed + 32 * nike.rotationSpeed
    },
    this.setRotationZoetrope = function(e) {
        for (var i = 0; i < conf.numShoeGroups; i++) e += 60 * i * DEG2RAD,
        nike.shoeGroups[i].rotation = new THREE.Euler(0, e, 0, "XYZ")
    },
    this.rotateZoetrope = function() {
        nike.doRotateZoetrope && ((0 === nike.firstRotateTime || void 0 === nike.firstRotateTime) && (nike.firstRotateTime = Date.now()), nike.setRotationZoetrope(11.25 * nike.getCurrentFrame() * DEG2RAD))
    },
    this.toggleDetailAnim = function() {
        nike.setDetailAnim(!modeSettings.showSingleShoeAnim)
    },
    this.setDetailAnim = function(e) {
        if (modeSettings.showSingleShoeAnim = e, nike.animationRunning = e, e) {
            nike.firstRotateTime = 0,
            nike.ui.interact = !1,
            $(".button_play_anim").removeClass("play_play"),
            $(".button_play_anim").addClass("play_pause"),
            nike.detailObject.scale.x = nike.detailObjectScale,
            nike.detailObject.scale.y = nike.detailObjectScale,
            nike.detailObject.scale.z = nike.detailObjectScale;
            var i = {
                v: 0
            };
            new TWEEN.Tween(i).to({
                v: 360
            },
            400).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function() {
                nike.detailObject.rotation.y = i.v * DEG2RAD,
                nike.detailAnim.rotation.y = i.v * DEG2RAD
            }).start(),
            new TWEEN.Tween(nike.detailObject.scale).to({
                x: .01,
                y: .01,
                z: .01
            },
            400).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                nike.scene.remove(nike.detailObject)
            }).start(),
            nike.scene.add(nike.detailAnim),
            nike.detailAnim.scale = {
                x: .01,
                y: .01,
                z: .01
            },
            new TWEEN.Tween(nike.detailAnim.scale).to({
                x: nike.detailAnimScale,
                y: nike.detailAnimScale,
                z: nike.detailAnimScale
            },
            400).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                nike.ui.interact = !0
            }).start();
            var t = {
                x: nike.detailCameraPos.x,
                y: nike.detailPosition.y,
                z: nike.detailCameraPos.z
            };
            new TWEEN.Tween(nike.camera.position).to(t, 500).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {}).start(); {
                new TWEEN.Tween(this.controls.center).to({
                    x: 0,
                    y: nike.detailPosition.y,
                    z: 0
                },
                500).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                    nike.ui.interact = !0
                }).start()
            }
        } else {
            nike.ui.interact = !1;
            var i = {
                v: 360
            };
            new TWEEN.Tween(i).to({
                v: 0
            },
            400).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function() {
                nike.detailObject.rotation.y = i.v * DEG2RAD,
                nike.detailAnim.rotation.y = i.v * DEG2RAD
            }).start(),
            $(".button_play_anim").addClass("play_play"),
            $(".button_play_anim").removeClass("play_pause"),
            new TWEEN.Tween(nike.detailAnim.scale).to({
                x: .01,
                y: .01,
                z: .01
            },
            400).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                nike.scene.remove(nike.detailAnim)
            }).start(),
            nike.scene.add(nike.detailObject),
            nike.detailObject.scale = {
                x: .01,
                y: .01,
                z: .01
            },
            new TWEEN.Tween(nike.detailObject.scale).to({
                x: nike.detailObjectScale,
                y: nike.detailObjectScale,
                z: nike.detailObjectScale
            },
            400).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                nike.ui.interact = !0
            }).start()
        }
    },
    this.showShoeAnimDetail = function() {
        nike.detailFrameCount = Math.floor((Date.now() - nike.firstRotateTime) / 83) % 32;
        for (var e = 0; e < nike.detailAnim.children[0].children.length; e++) for (var i = 0; 2 > i; i++) if (nike.detailAnim.children[i]) {
            var t = nike.detailAnim.children[i].children[e];
            t && (e == nike.detailFrameCount ? (t.visible = !0, t.scale.x = 4.3, t.scale.y = 4.3, t.scale.z = 4.3, t.rotation = new THREE.Euler(0, 0, 0)) : t.visible = !1)
        }
    },
    this.setMode = function(e) {
        if ((e != MODE_SEQUENCER || modeSettings.currentMode != MODE_DETAIL) && modeSettings.currentMode != e) {
            if (this.initModeCamera(e), this.ui.setButtonsMode(e), modeSettings.currentMode == MODE_DETAIL, nike.animationRunning = !1, (modeSettings.currentMode == MODE_SEQUENCER || modeSettings.currentMode == MODE_INTRO) && this.sequencerDisplay.clearSequencerMaterials(), e == MODE_SEQUENCER || e == MODE_DEFAULT) for (var i = 0; i < this.shoeGroups.length; i++) {
                for (var t = 0; t < this.shoeGroups[i].children.length; t++) this.shoeGroups[i].children[t].visible = !0;
                for (var t = 0; 32 > t; t++) this.sequencerDisplay.sequencerGroups[i].children[t] && (this.sequencerDisplay.sequencerGroups[i].children[t].visible = !0)
            }
            if (e == MODE_SEQUENCER || e == MODE_INTRO) {
                this.sequencerDisplay.markSequencerShoes(),
                this.ui.setControlsEnabled(!1);
                for (var i = 0; i < this.shoeGroups.length; i++) this.shoeGroups[i].rotation = new THREE.Euler(0, 0, 0)
            }
            if (e == MODE_DEFAULT) {
                $("#loading").hide(),
                this.ui.initHover();
                for (var i = 0; i < conf.numShoeGroups; i++) nike.sequencerDisplay.switchSequencerGroup(i, !1);
                if (modeSettings.currentMode == MODE_SEQUENCER) for (var i = 0; i < this.shoeGroups.length; i++) nike.ui.matHover[i].transparent = !0,
                nike.ui.matHover[i].opacity = 0,
                nike.sequencerDisplay.switchSequencerGroup(i, !1);
                if (modeSettings.currentMode == MODE_DETAIL) {
                    nike.ui.setInteraction(!1); {
                        var n = nike.particleMaterial;
                        new TWEEN.Tween(n).to({
                            size: 200
                        },
                        2e3).easing(TWEEN.Easing.Cubic.InOut).start()
                    }
                    nike.objBG.material.transparent = !0,
                    new TWEEN.Tween(nike.flare_top.material).to({
                        opacity: .6
                    },
                    2e3).easing(TWEEN.Easing.Cubic.InOut).start(),
                    new TWEEN.Tween(nike.flare_bottom.material).to({
                        opacity: .6
                    },
                    2e3).easing(TWEEN.Easing.Cubic.InOut).start(),
                    new TWEEN.Tween(nike.objBG.material).to({
                        opacity: 1
                    },
                    2e3).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                        nike.objBG.material.transparent = !1,
                        nike.ui.setInteraction(!0, {
                            name: "setmode MODE_DEFAULT"
                        })
                    }).start(),
                    nike.showZoetrope(!0),
                    nike.doRotateZoetrope = !0,
                    nike.detailObject && ($(".button_play_anim").addClass("play_play"), $(".button_play_anim").removeClass("play_pause"), modeSettings.showSingleShoeAnim = !1, nike.animationRunning = !1),
                    nike.controls.resetMouse()
                }
            }
            e == MODE_DETAIL && ($(".title").fadeOut(), nike.setDetailCameraDistance(), nike.postProc.uniforms.colorizeR.value = 0, nike.postProc.uniforms.colorizeG.value = 0, nike.postProc.uniforms.colorizeB.value = 0, nike.scrolledDown = !1, nike.ui.setInteraction(!1), setTimeout(function() {
                nike.doRotateZoetrope = !1,
                nike.showZoetrope(!1)
            },
            1e3), setTimeout(function() {
                nike.ui.setControlsEnabled(!0),
                nike.controls.minPolarAngle = -1130 * DEG2RAD,
                nike.controls.maxPolarAngle = 1110 * DEG2RAD,
                nike.controls.minDistance = 399,
                nike.controls.maxDistance = 400,
                nike.controls.userZoom = !1
            },
            2e3), nike.loadDetail(2e3), new TWEEN.Tween(nike.particleMaterial).to({
                size: 0
            },
            2e3).easing(TWEEN.Easing.Cubic.InOut).start(), nike.objBG.material.transparent = !0, new TWEEN.Tween(nike.objBG.material).to({
                opacity: 0
            },
            1e3).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                new TWEEN.Tween(nike.bgDetailMaterial).to({
                    opacity: .5
                },
                1e3).easing(TWEEN.Easing.Cubic.InOut).start(),
                new TWEEN.Tween(nike.bgDetailPreviewMaterial).to({
                    opacity: 1
                },
                1e3).easing(TWEEN.Easing.Cubic.InOut).start(),
                nike.bgDetailPreviewMaterial.map = loader.getAsset("detailpreview" + modeSettings.currentShoeGroup),
                nike.scrolledDown = !0
            }).start()),
            modeSettings.currentMode = e
        }
    },
    this.oldCameraPosX = 0,
    this.oldCameraPosZ = 0,
    this.initModeCamera = function(e) {
        {
            var i = this.camera.position;
            this.camera.target
        }
        if (e == MODE_INTRO) return nike.seqLinesMaterial.opacity = 1,
        nike.seqDarkLinesMaterial.opacity = 1,
        nike.camera.position.x = 0,
        nike.camera.position.y = nike.topCameraY,
        nike.camera.position.z = 0,
        void 0;
        if (e == MODE_SEQUENCER) {
            nike.ui.setInteraction(!1),
            nike.camDefaultPosition.x = nike.camera.position.x,
            nike.camDefaultPosition.y = nike.camera.position.y,
            nike.camDefaultPosition.z = nike.camera.position.z; {
                var t = {
                    x: 1e-6 * nike.camera.position.x,
                    y: nike.topCameraY,
                    z: 1e-6 * nike.camera.position.z
                };
                new TWEEN.Tween(i).to(t, 2e3).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                    nike.ui.setInteraction(!0)
                }).start()
            }
            new TWEEN.Tween(nike.seqLinesMaterial).to({
                opacity: 1
            },
            2e3).easing(TWEEN.Easing.Cubic.InOut).start(),
            new TWEEN.Tween(nike.seqDarkLinesMaterial).to({
                opacity: 1
            },
            2e3).easing(TWEEN.Easing.Cubic.InOut).start()
        }
        if (e == MODE_DEFAULT) {
            nike.ui.setInteraction(!1, {
                name: "switching to default"
            }),
            nike.sequencerDisplay.sequencerGroups[modeSettings.currentShoeGroup].visible = !0;
            var n = 2e3;
            setTimeout(function() {
                nike.detailObject && new TWEEN.Tween(nike.detailObject.scale).to({
                    x: 0,
                    y: 0,
                    z: 0
                },
                1e3).easing(TWEEN.Easing.Cubic.Out).onComplete(function() {
                    nike.scene.remove(nike.detailObject),
                    nike.scene.remove(nike.detailAnim)
                }).start()
            },
            800),
            new TWEEN.Tween(nike.seqLinesMaterial).to({
                opacity: 0
            },
            2e3).easing(TWEEN.Easing.Cubic.InOut).start(),
            new TWEEN.Tween(nike.seqDarkLinesMaterial).to({
                opacity: 0
            },
            2e3).easing(TWEEN.Easing.Cubic.InOut).start(); {
                var a = (new TWEEN.Tween(this.controls.center).to({
                    x: nike.defaultTarget.x,
                    y: nike.defaultTarget.y,
                    z: nike.defaultTarget.z
                },
                n).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function() {}).start(), {
                    x: nike.camDefaultPosition.x,
                    y: nike.camDefaultPosition.y,
                    z: nike.camDefaultPosition.z
                });
                new TWEEN.Tween(i).to(a, n).easing(TWEEN.Easing.Sinusoidal.InOut).onComplete(function() {
                    nike.ui.setControlsEnabled(!0),
                    nike.ui.startLookAround(),
                    nike.ui.setInteraction(!0, {
                        name: "end of switch to default..."
                    })
                }).start()
            }
            modeSettings.currentMode == MODE_DETAIL && (new TWEEN.Tween(nike.bgDetailMaterial).to({
                opacity: 0
            },
            1e3).easing(TWEEN.Easing.Cubic.InOut).start(), new TWEEN.Tween(nike.bgDetailPreviewMaterial).to({
                opacity: 0
            },
            1e3).easing(TWEEN.Easing.Cubic.InOut).start())
        }
        if (e == MODE_DETAIL) {
            nike.ui.stopLookAround();
            var r = nike.detailPosition.y;
            nike.ui.setInteraction(!1, {
                name: "setmode MODE_DETAIL"
            }); {
                new TWEEN.Tween(this.controls.center).to({
                    x: 0,
                    y: r,
                    z: 0
                },
                2e3).easing(TWEEN.Easing.Cubic.InOut).onUpdate(function() {}).start()
            }
            nike.setDetailCameraDistance();
            for (var o = {
                x: nike.detailCameraPos.x,
                y: r,
                z: nike.detailCameraPos.z
            },
            s = (new TWEEN.Tween(i).to(o, 2e3).easing(TWEEN.Easing.Cubic.InOut).start(), 0); s < conf.numShoeGroups; s++) for (var l = 0; l < conf.numShoeSteps; l++) nike.sequencerDisplay.sequencerGroups[s].children[l].visible = !1
        }
    },
    this.setDetailCameraDistance = function() {
        var e = Math.sqrt((nike.camera.position.x - 0) * (nike.camera.position.x - 0) + (nike.camera.position.z - 0) * (nike.camera.position.z - 0));
        if (400 > e) {
            var i = 400 / e;
            nike.detailCameraPos.x = nike.camera.position.x * i,
            nike.detailCameraPos.z = nike.camera.position.z * i
        } else {
            var i = e / 400;
            nike.detailCameraPos.x = nike.camera.position.x / i,
            nike.detailCameraPos.z = nike.camera.position.z / i
        }
    },
    this.render = function() {
        if (!stopped) {
            if (0 == nike.timeRunnimgStart && (nike.timeRunnimgStart = nike.timeRunning = Date.now()), nike.timeRunning = Date.now() - nike.timeRunnimgStart, nike.timeRunningSeconds = nike.timeRunning / 1e3, nike.particleMaterial && (nike.particleMaterial.uniforms.time.value = nike.timeRunning / 1e3, nike.particleSystem.rotation.y = nike.timeRunningSeconds * DEG2RAD * 2, nike.particleSystem2.rotation.y = nike.timeRunningSeconds * DEG2RAD * 1.5), null != nike.flare_bottom && (nike.flare_bottom.scale.x = 1 + .001 * nike.camera.position.y + 3.6, nike.flare_bottom.scale.x < 0 && (nike.flare_bottom.scale.x = 0), nike.flare_bottom.scale.y = nike.flare_bottom.scale.x, nike.flare_bottom.scale.z = nike.flare_bottom.scale.x, nike.flare_top.scale.x = 1 + nike.camera.position.y * -.001 + 3.1, nike.flare_top.scale.y = nike.flare_top.scale.x, nike.flare_top.scale.z = nike.flare_top.scale.x, nike.flare_bottom.position.y = nike.camera.position.y - 340, nike.flare_bottom.position.z = .7 * nike.camera.position.z, nike.flare_bottom.position.x = .7 * nike.camera.position.x, nike.flare_bottom.quaternion = nike.camera.quaternion, nike.flare_top.position.y = nike.camera.position.y + 300, nike.flare_top.position.z = .7 * nike.camera.position.z, nike.flare_top.position.x = .7 * nike.camera.position.x, nike.flare_top.quaternion = nike.camera.quaternion), null != nike.controls && modeSettings.currentMode == MODE_DEFAULT && (nike.controls.center.y += nike.ui.lookAroundMul * Math.sin(nike.timeRunningSeconds) * .05, nike.controls.center.z += nike.ui.lookAroundMul * Math.cos(nike.timeRunningSeconds) * .05, nike.controls.object.position.y -= nike.ui.lookAroundMul * Math.sin(2 + nike.timeRunningSeconds) * .05, nike.controls.object.position.z -= nike.ui.lookAroundMul * Math.cos(2 + nike.timeRunningSeconds) * .05), !nike.ui.dragMeWasShown && -1 != nike.ui.lastDrag && Date.now() - nike.ui.lastDrag > 2e4 && modeSettings.currentMode == MODE_DEFAULT && (nike.ui.dragMeWasShown = !0, $("#dragme").fadeIn()), modeSettings.currentMode == MODE_DETAIL && modeSettings.showSingleShoeAnim && nike.showShoeAnimDetail(), (modeSettings.currentMode == MODE_SEQUENCER || modeSettings.currentMode == MODE_INTRO) && nike.sequencerDisplay.update(), nike.rotateZoetrope(), null != nike.stats && nike.stats.update(), TWEEN.update(), nike.renderer.clear(!1, !0, !0), nike.doPostProcess ? (nike.postProc.uniforms.time.value = nike.timeRunningSeconds, nike.composer.render(), nike.composerEffects.render()) : (nike.renderer.render(nike.sceneOverlay, nike.cameraOverlay), nike.renderer.render(nike.scene, nike.camera)), null != nike.controls && nike.controls.update(), nike.emptyDetailModel && nike.detailObject && void 0 != nike.detailObject.geometry) {
                var e = nike.detailObject.geometry.vertices.length;
                nike.detailObject.geometry.vertices = {
                    length: e
                };
                var i = nike.detailObject.geometry.faces.length;
                nike.detailObject.geometry.faces = {
                    length: i
                };
                var t = nike.detailObject.geometry.faceVertexUvs[0].length;
                nike.detailObject.geometry.faceVertexUvs = [{
                    length: t
                }],
                nike.emptyDetailModel = !1
            }
            setTimeout(function() {
                void 0 != nike && requestAnimationFrame(nike.render)
            },
            5)
        }
    },
    this.getMaterial = function(e) {
        var i = e.diffusemap,
        t = e.normalmap,
        n = e.specmap,
        a = e.alphamap;
        "string" == typeof i && (i = loader.getAsset(e.diffusemap)),
        "string" == typeof t && (t = loader.getAsset(e.normalmap)),
        "string" == typeof n && (n = loader.getAsset(e.specmap)),
        "string" == typeof a && (a = loader.getAsset(e.alphamap)),
        e.fog = void 0 == e.fog ? 0 : 1;
        var r = 0;
        void 0 != e.alphamap && (r = 1);
        var o = new THREE.ShaderMaterial({
            uniforms: {
                tNormal: {
                    type: "t",
                    value: t
                },
                tDiffuse: {
                    type: "t",
                    value: i
                },
                tSpecular: {
                    type: "t",
                    value: n
                },
                tAlpha: {
                    type: "t",
                    value: a
                },
                tMatCap: {
                    type: "t",
                    value: loader.getAsset("envmap_diffuse")
                },
                tMatCapRim: {
                    type: "t",
                    value: loader.getAsset("envmap_rimlight")
                },
                time: {
                    type: "f",
                    value: 0
                },
                bump: {
                    type: "f",
                    value: 1
                },
                noise: {
                    type: "f",
                    value: .04
                },
                repeat: {
                    type: "v2",
                    value: new THREE.Vector2(1, 1)
                },
                useNormal: {
                    type: "f",
                    value: 1
                },
                useRim: {
                    type: "f",
                    value: 0
                },
                rimPower: {
                    type: "f",
                    value: 2
                },
                useScreen: {
                    type: "f",
                    value: 0
                },
                normalScale: {
                    type: "f",
                    value: .5
                },
                normalRepeat: {
                    type: "f",
                    value: 1
                },
                blackwhite: {
                    type: "f",
                    value: 0
                },
                giPos: {
                    type: "f",
                    value: 0
                },
                useBlackWhite: {
                    type: "f",
                    value: 1
                },
                fogmul: {
                    type: "f",
                    value: e.fog
                },
                mulalpha: {
                    type: "f",
                    value: r
                }
            },
            vertexShader: document.getElementById("vertexShader").textContent,
            fragmentShader: document.getElementById("fragmentShader").textContent,
            wrapping: THREE.ClampToEdgeWrapping,
            shading: THREE.SmoothShading,
            side: THREE.DoubleSide
        });
        return 1 == e.transparent && (o.side = THREE.DoubleSide, o.depthWrite = !1, o.depthTest = !0),
        1 == e.transparent && (o.transparent = !0),
        1 == e.depthWrite && (o.depthWrite = !0),
        o
    },
    this.detailNext = function(e) {
        var i = modeSettings.currentShoeGroup + e;
        if (0 > i && (i = 6), i > 6 && (i = 0), i != modeSettings.currentShoeGroup) {
            $("#detail-prev").fadeOut(),
            $("#detail-next").fadeOut(),
            nike.ui.setInteraction(!1);
            var t = 600;
            0 > e && (t *= -1); {
                var n = {
                    x: nike.detailCameraPos.x,
                    y: nike.detailPosition.y,
                    z: nike.detailCameraPos.z
                },
                a = n.x - nike.camera.position.x,
                r = n.y - nike.camera.position.y,
                o = n.z - nike.camera.position.z,
                s = Math.sqrt(a * a + r * r + o * o);
                new TWEEN.Tween(nike.camera.position).to(n, 2 * s + 50).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {}).start()
            }
            setTimeout(function() {
                new TWEEN.Tween(nike.detailAnim.position).to({
                    x: nike.detailPosition.x,
                    y: nike.detailPosition.y,
                    z: nike.detailPosition.z + t
                },
                550).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                    nike.scene.remove(nike.detailObject),
                    nike.scene.remove(nike.detailAnim)
                }).start(),
                new TWEEN.Tween(nike.detailObject.position).to({
                    x: nike.detailPosition.x,
                    y: nike.detailPosition.y,
                    z: nike.detailPosition.z + t
                },
                550).easing(TWEEN.Easing.Cubic.InOut).onComplete(function() {
                    nike.scene.remove(nike.detailAnim),
                    nike.scene.remove(nike.detailObject),
                    nike.detailObject.scale = nike.detailObjectScale,
                    modeSettings.showSingleShoeAnim && nike.toggleDetailAnim()
                }).start(),
                nike.detailpreview.position.x = 200,
                nike.bgDetailPreviewMaterial.opacity = 1,
                nike.bgDetailPreviewMaterial.map = loader.getAsset("detailpreview" + i),
                $("#loading").show(),
                new TWEEN.Tween(nike.detailpreview.position).to({
                    x: 0
                },
                550).easing(TWEEN.Easing.Cubic.InOut).start(),
                nike.loadDetail(550),
                $("#shoe-detail-" + modeSettings.currentShoeGroup).css({
                    "overflow-y": "hidden"
                }),
                $("#shoe-detail-" + modeSettings.currentShoeGroup).css({
                    "margin-left": "0%",
                    width: "100%"
                });
                var n = "-100%";
                0 > e && (n = "100%"),
                $("#shoe-detail-" + modeSettings.currentShoeGroup).stop(!0).animate({
                    "margin-left": n,
                    "margin-top": "0"
                },
                function() {
                    $("#shoe-detail-" + modeSettings.currentShoeGroup).hide(),
                    modeSettings.currentShoeGroup = i,
                    nike.detailShoeIndex = i
                }),
                $("#shoe-detail-" + i).show(),
                $("#shoe-detail-" + i).css({
                    width: "100%"
                }),
                $("#shoe-detail-" + i).scrollTop(0),
                $("#shoe-detail-" + i).css({
                    "overflow-y": "hidden"
                }),
                0 > e ? ($("#shoe-detail-" + i).css({
                    "margin-left": "-100%"
                }), $("#shoe-detail-" + i).stop(!0).animate({
                    "margin-left": "0%",
                    "margin-top": "0"
                },
                500,
                function() {
                    $("#shoe-detail-" + i).css({
                        "overflow-y": "auto"
                    })
                })) : ($("#shoe-detail-" + i).css({
                    "margin-left": "100%"
                }), $("#shoe-detail-" + i).stop(!0).animate({
                    "margin-left": "0%",
                    "margin-top": "0"
                },
                500,
                function() {
                    $("#shoe-detail-" + i).css({
                        "overflow-y": "auto"
                    })
                }))
            },
            2 * s - s)
        }
    },
    this.detailTextureCounter = 0,
    this.countDetailTextures = function() {
        nike.detailTextureCounter++,
        nike.detailTextureCounter >= 4 ? (setTimeout(function() {
            nike.detailObject.position.y = nike.detailPosition.y,
            $("#loading").hide(),
            setTimeout(function() {
                $(".button_play_anim").stop(!0).fadeIn()
            },
            750),
            nike.bgDetailPreviewMaterial.opacity = 0
        }), setTimeout(function() {
            $("#detail-prev").fadeIn(),
            $("#detail-next").fadeIn(),
            nike.detailAnimLoading = !1,
            nike.emptyDetailModel = !0,
            nike.ui.setInteraction(!0),
            console.log("load finished..."),
            nike.ui.lastDetailX = 0,
            nike.ui.lastDetailY = 0
        },
        500)) : nike.ui.setInteraction(!1)
    },
    this.loadDetail = function(e) {
        $("#detail-prev").hide(),
        $("#detail-next").hide(),
        nike.continueloadingdetail = !0,
        nike.detailAnimLoading = !0,
        nike.ui.setInteraction(!1),
        $(".button_play_anim").hide(),
        $("#loading").stop(!0).fadeIn(200),
        setTimeout(function() {
            var e = new THREE.UTF8Loader,
            i = "";
            0 == modeSettings.currentShoeGroup && (i = "sockracer"),
            1 == modeSettings.currentShoeGroup && (i = "airrift"),
            2 == modeSettings.currentShoeGroup && (i = "presto"),
            3 == modeSettings.currentShoeGroup && (i = "freeog"),
            4 == modeSettings.currentShoeGroup && (i = "freerun2"),
            5 == modeSettings.currentShoeGroup && (i = "flyknit"),
            6 == modeSettings.currentShoeGroup && (i = "freerun5"),
            nike.continueloadingdetail && e.load("objekte/anim_" + i + ".js",
            function(t) {
                nike.detailAnim = t;
                var n, a, r, o, s, l, d, c, u, p, m, h, E, k, g, f;
                if (1 == modeSettings.currentShoeGroup) {
                    if (!nike.continueloadingdetail) return;
                    n = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_CLR_A.jpg", new THREE.UVMapping),
                    a = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_CLR_B.jpg", new THREE.UVMapping),
                    r = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_CLR_C.jpg", new THREE.UVMapping),
                    o = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_CLR_D.jpg", new THREE.UVMapping),
                    s = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_NRML_A.jpg", new THREE.UVMapping),
                    l = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_NRML_B.jpg", new THREE.UVMapping),
                    d = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_NRML_C.jpg", new THREE.UVMapping),
                    c = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_NRML_D.jpg", new THREE.UVMapping),
                    u = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_SPEC_A.jpg", new THREE.UVMapping),
                    p = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_SPEC_B.jpg", new THREE.UVMapping),
                    m = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_SPEC_C.jpg", new THREE.UVMapping),
                    h = THREE.ImageUtils.loadTexture(loader.texturePath + "AirRift_S_SPEC_D.jpg", new THREE.UVMapping),
                    E = nike.getMaterial({
                        diffusemap: n,
                        specmap: u,
                        normalmap: s,
                        transparent: !1
                    }),
                    k = nike.getMaterial({
                        diffusemap: a,
                        specmap: p,
                        normalmap: l,
                        transparent: !1
                    }),
                    g = nike.getMaterial({
                        diffusemap: r,
                        specmap: m,
                        normalmap: d,
                        transparent: !1
                    }),
                    f = nike.getMaterial({
                        diffusemap: o,
                        specmap: h,
                        normalmap: c,
                        transparent: !1
                    })
                }
                if (0 == modeSettings.currentShoeGroup && e.load("objekte/anim_sockracer_slinky.js",
                function(e) {
                    if (nike.continueloadingdetail) {
                        nike.detailAnim.add(e.children[0]);
                        for (var t = 0; t < nike.detailAnim.children[1].children.length; t++) index = t >= 0 && 10 >= t ? "a": t >= 11 && 15 >= t ? "b": t >= 16 && 20 >= t ? "c": "d",
                        nike.detailAnim.children[1].children[t].material = nike.getMaterial({
                            diffusemap: i + "_diffuse_" + index,
                            normalmap: i + "_normal_" + index,
                            specmap: i + "_spec_" + index,
                            alphamap: i + "_alpha_" + index,
                            transparent: !0
                        }),
                        nike.detailAnim.children[1].children[t].material.uniforms && (nike.detailAnim.children[1].children[t].material.uniforms.blackwhite.value = 1),
                        nike.detailAnim.children[1].children[t].geometry.computeTangents(),
                        nike.detailAnim.children[1].children[t].scale.x = nike.detailAnimScale,
                        nike.detailAnim.children[1].children[t].scale.y = nike.detailAnimScale,
                        nike.detailAnim.children[1].children[t].scale.z = nike.detailAnimScale
                    }
                }), 4 == modeSettings.currentShoeGroup && e.load("objekte/anim_freerun2_alpha.js",
                function(e) {
                    if (nike.continueloadingdetail) {
                        nike.detailAnim.add(e.children[0]);
                        for (var t = 0; t < nike.detailAnim.children[1].children.length; t++) index = t >= 0 && 4 >= t ? "d": t >= 5 && 21 >= t ? "c": t >= 22 && 26 >= t ? "b": "a",
                        nike.detailAnim.children[1].children[t].material = nike.getMaterial({
                            diffusemap: i + "_diffuse_" + index,
                            normalmap: i + "_normal_" + index,
                            specmap: i + "_spec_" + index,
                            alphamap: i + "_alpha_" + index,
                            transparent: !0
                        }),
                        nike.detailAnim.children[1].children[t].material.uniforms && (nike.detailAnim.children[1].children[t].material.uniforms.blackwhite.value = 1),
                        nike.detailAnim.children[1].children[t].geometry.computeTangents(),
                        nike.detailAnim.children[1].children[t].scale.x = nike.detailAnimScale,
                        nike.detailAnim.children[1].children[t].scale.y = nike.detailAnimScale,
                        nike.detailAnim.children[1].children[t].scale.z = nike.detailAnimScale
                    }
                }), 5 == modeSettings.currentShoeGroup && e.load("objekte/anim_flyknit_hex.js",
                function(e) {
                    nike.detailAnim.add(e.children[0]);
                    for (var i = 0; i < nike.detailAnim.children[1].children.length; i++) nike.detailAnim.children[1].children[i].material = nike.getMaterial({
                        diffusemap: "flyknit_hex",
                        transparent: !1
                    }),
                    nike.detailAnim.children[1].children[i].material.uniforms && (nike.detailAnim.children[1].children[i].material.uniforms.blackwhite.value = 1),
                    nike.detailAnim.children[1].children[i].geometry.computeTangents(),
                    nike.detailAnim.children[1].children[i].scale.x = nike.detailAnimScale,
                    nike.detailAnim.children[1].children[i].scale.y = nike.detailAnimScale,
                    nike.detailAnim.children[1].children[i].scale.z = nike.detailAnimScale
                }), nike.continueloadingdetail) {
                    for (var T = 0; T < nike.detailAnim.children[0].children.length; T++) 3 == modeSettings.currentShoeGroup ? nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse",
                        normalmap: i + "_normal",
                        specmap: i + "_spec",
                        transparent: !1
                    }) : 1 == modeSettings.currentShoeGroup ? (T >= 0 && 8 > T && (nike.detailAnim.children[0].children[T].material = E), T >= 8 && 16 > T && (nike.detailAnim.children[0].children[T].material = k), T >= 16 && 24 > T && (nike.detailAnim.children[0].children[T].material = g), T >= 24 && (nike.detailAnim.children[0].children[T].material = f)) : 2 == modeSettings.currentShoeGroup ? (T >= 0 && 9 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_d",
                        normalmap: i + "_normal_d",
                        specmap: i + "_spec_d",
                        transparent: !1
                    })), T >= 10 && 15 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_c",
                        normalmap: i + "_normal_c",
                        specmap: i + "_spec_c",
                        transparent: !1
                    })), T >= 16 && 21 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_b",
                        normalmap: i + "_normal_b",
                        specmap: i + "_spec_b",
                        transparent: !1
                    })), T > 21 && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_a",
                        normalmap: i + "_normal_a",
                        specmap: i + "_spec_a",
                        transparent: !1
                    }))) : 0 == modeSettings.currentShoeGroup ? (index = T >= 0 && 10 >= T ? "a": T >= 11 && 15 >= T ? "b": T >= 16 && 20 >= T ? "c": "d", nike.detailAnim.children[0].children[T] && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_" + index,
                        normalmap: i + "_normal_" + index,
                        specmap: i + "_spec_" + index,
                        transparent: !1
                    }))) : 4 == modeSettings.currentShoeGroup ? (T >= 0 && 4 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_d",
                        normalmap: i + "_normal_d",
                        specmap: i + "_spec_d",
                        alphamap: i + "_alpha_d",
                        depthWrite: !0,
                        transparent: !0
                    })), T >= 5 && 21 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_c",
                        normalmap: i + "_normal_c",
                        specmap: i + "_spec_c",
                        alphamap: i + "_alpha_c",
                        depthWrite: !0,
                        transparent: !0
                    })), T >= 22 && 26 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_b",
                        normalmap: i + "_normal_b",
                        specmap: i + "_spec_b",
                        alphamap: i + "_alpha_b",
                        depthWrite: !0,
                        transparent: !0
                    })), T >= 27 && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_a",
                        normalmap: i + "_normal_a",
                        specmap: i + "_spec_a",
                        alphamap: i + "_alpha_a",
                        depthWrite: !0,
                        transparent: !0
                    }))) : 5 == modeSettings.currentShoeGroup ? (T >= 0 && 10 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_d",
                        normalmap: i + "_normal_d",
                        specmap: i + "_spec_d",
                        alphamap: i + "_alpha_a",
                        depthWrite: !0,
                        transparent: !0
                    })), T >= 11 && 17 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_c",
                        normalmap: i + "_normal_c",
                        specmap: i + "_spec_c",
                        alphamap: i + "_alpha_b",
                        depthWrite: !0,
                        transparent: !0
                    })), T >= 18 && 24 >= T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_b",
                        normalmap: i + "_normal_b",
                        specmap: i + "_spec_b",
                        alphamap: i + "_alpha_c",
                        depthWrite: !0,
                        transparent: !0
                    })), T >= 25 && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_a",
                        normalmap: i + "_normal_a",
                        specmap: i + "_spec_a",
                        alphamap: i + "_alpha_d",
                        depthWrite: !0,
                        transparent: !0
                    }))) : 6 == modeSettings.currentShoeGroup ? (T >= 0 && 8 > T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_a",
                        normalmap: i + "_normal_a",
                        specmap: i + "_spec_a",
                        transparent: !1
                    })), T >= 8 && 16 > T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_b",
                        normalmap: i + "_normal_b",
                        specmap: i + "_spec_b",
                        transparent: !1
                    })), T >= 16 && 24 > T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_c",
                        normalmap: i + "_normal_c",
                        specmap: i + "_spec_c",
                        transparent: !1
                    })), T >= 24 && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_d",
                        normalmap: i + "_normal_d",
                        specmap: i + "_spec_d",
                        transparent: !1
                    }))) : (T >= 0 && 8 > T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_d",
                        normalmap: i + "_normal_d",
                        specmap: i + "_spec_d",
                        transparent: !1
                    })), T >= 8 && 16 > T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_c",
                        normalmap: i + "_normal_c",
                        specmap: i + "_spec_c",
                        transparent: !1
                    })), T >= 16 && 24 > T && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_b",
                        normalmap: i + "_normal_b",
                        specmap: i + "_spec_b",
                        transparent: !1
                    })), T >= 24 && (nike.detailAnim.children[0].children[T].material = nike.getMaterial({
                        diffusemap: i + "_diffuse_a",
                        normalmap: i + "_normal_a",
                        specmap: i + "_spec_a",
                        transparent: !1
                    }))),
                    nike.detailAnim.children[0].children[T].material.uniforms && (nike.detailAnim.children[0].children[T].material.uniforms.blackwhite.value = 1),
                    nike.detailAnim.children[0].children[T].geometry.computeTangents(),
                    nike.detailAnim.children[0].children[T].scale.x = nike.detailAnimScale,
                    nike.detailAnim.children[0].children[T].scale.y = nike.detailAnimScale,
                    nike.detailAnim.children[0].children[T].scale.z = nike.detailAnimScale;
                    if (nike.detailAnim.position.x = nike.detailPosition.x, nike.detailAnim.position.y = nike.detailPosition.y - 75, nike.detailAnim.position.z = nike.detailPosition.z, nike.continueloadingdetail) {
                        var _ = new THREE.BinaryLoader;
                        _.load("objekte/high2_" + i + ".js",
                        function(e) {
                            if (nike.continueloadingdetail) {
                                nike.scene.remove(nike.detailObject);
                                var i, t, n = loader.getAsset("white");
                                nike.detailTextureCounter = 0,
                                0 == modeSettings.currentShoeGroup && (i = THREE.ImageUtils.loadTexture("textures_detail/140221_SockRacer_CLR_DW_white.jpg", new THREE.UVMapping, nike.countDetailTextures), t = THREE.ImageUtils.loadTexture("textures_detail/140221_SockRacer_NRML_DW.jpg", new THREE.UVMapping, nike.countDetailTextures), n = THREE.ImageUtils.loadTexture("textures_detail/140221_SockRacer_SPEC_DW.jpg", new THREE.UVMapping, nike.countDetailTextures)),
                                1 == modeSettings.currentShoeGroup && (i = THREE.ImageUtils.loadTexture("textures_detail/140207_AirRift_Diffuse_4K.jpg", new THREE.UVMapping, nike.countDetailTextures), t = THREE.ImageUtils.loadTexture("textures_detail/140207_AirRift_normal_2048.jpg", new THREE.UVMapping, nike.countDetailTextures), n = THREE.ImageUtils.loadTexture("textures_detail/140207_AirRift_spec_2048.jpg", new THREE.UVMapping, nike.countDetailTextures)),
                                2 == modeSettings.currentShoeGroup && (i = THREE.ImageUtils.loadTexture("textures_detail/Presto_HighRes_CLR_NEW_02_WithLogo.jpg", new THREE.UVMapping, nike.countDetailTextures), t = THREE.ImageUtils.loadTexture("textures_detail/Presto_HighRes_NRML_WithLogo.jpg", new THREE.UVMapping, nike.countDetailTextures), n = THREE.ImageUtils.loadTexture("textures_detail/Presto_HighRes_SPEC.jpg", new THREE.UVMapping, nike.countDetailTextures)),
                                3 == modeSettings.currentShoeGroup && (i = THREE.ImageUtils.loadTexture("textures_detail/FreeOG_HighRes_CLR.jpg", new THREE.UVMapping, nike.countDetailTextures), t = THREE.ImageUtils.loadTexture("textures_detail/FreeOG_HighRes_NRML.jpg", new THREE.UVMapping, nike.countDetailTextures), n = THREE.ImageUtils.loadTexture("textures_detail/FreeOG_HighRes_SPEC.jpg", new THREE.UVMapping, nike.countDetailTextures)),
                                4 == modeSettings.currentShoeGroup && (i = THREE.ImageUtils.loadTexture("textures_detail/FreeRun2_HighRes_right_shoe_BNW.jpg", new THREE.UVMapping, nike.countDetailTextures), t = THREE.ImageUtils.loadTexture("textures_detail/FreeRun2_HighRes_right_shoe_NRML.jpg", new THREE.UVMapping, nike.countDetailTextures), n = THREE.ImageUtils.loadTexture("textures_detail/FreeRun2_HighRes_SPEC.jpg", new THREE.UVMapping, nike.countDetailTextures)),
                                5 == modeSettings.currentShoeGroup && (i = THREE.ImageUtils.loadTexture("textures_detail/FLYKNIT_Color.jpg", new THREE.UVMapping, nike.countDetailTextures), t = THREE.ImageUtils.loadTexture("textures_detail/FLYKNIT_NRM.jpg", new THREE.UVMapping, nike.countDetailTextures), n = THREE.ImageUtils.loadTexture("textures_detail/FLYKNIT_SPEC.jpg", new THREE.UVMapping, nike.countDetailTextures)),
                                6 == modeSettings.currentShoeGroup && (i = THREE.ImageUtils.loadTexture("textures_detail/Free_Run_50_COL_FINAL.jpg", new THREE.UVMapping, nike.countDetailTextures), t = THREE.ImageUtils.loadTexture("textures_detail/Free_Run_50_NRM.jpg", new THREE.UVMapping, nike.countDetailTextures), n = THREE.ImageUtils.loadTexture("textures_detail/Free_Run_50_SPEC.jpg", new THREE.UVMapping, nike.countDetailTextures)),
                                nike.detailObject = new THREE.Mesh(e, nike.getMaterial({
                                    diffusemap: i,
                                    specmap: n,
                                    normalmap: t,
                                    transparent: !1
                                })),
                                nike.detailObject.material.useBlackWhite = !0,
                                modeSettings.currentMode == MODE_DETAIL && (nike.scene.add(nike.detailObject), nike.detailObject.geometry.computeTangents(), nike.detailObject.material.uniforms.blackwhite.value = 1, nike.detailObject.scale.x = nike.detailObjectScale, nike.detailObject.scale.y = nike.detailObjectScale, nike.detailObject.scale.z = nike.detailObjectScale, nike.detailObject.position.x = nike.detailPosition.x, nike.detailObject.position.y = nike.detailPosition.y - 2e3, nike.detailObject.position.z = nike.detailPosition.z, nike.countDetailTextures())
                            }
                        })
                    }
                }
            })
        },
        e + 200)
    }
}

function _modeSettings() {
    this.currentMode = -1,
    this.currentShoeGroup = 1,
    this.showSingleShoeAnim = !1
}

function nikeConfig() {
    this.numShoeGroups = 7,
    this.numShoeSteps = 32,
    this.shoeScale = .1,
    this.shoeTitles = ["NIKE SOCK RACER", "NIKE AIR PRESTO", "NIKE AIR RIFT", "NIKE FREE 5.0 OG", "NIKE FREE RUN+ 2", "NIKE FREE 3.0 FLYKNIT", "NIKE FREE 5.0"]
}

function renderLoading() {
    started || (nike.renderer.clearDepth(), loader.loadNext(), loader.update(), nike.camera.position = new THREE.Vector3(10, nike.topCameraY, 0), nike.camera.target.position = new THREE.Vector3( - 1, 0, -10), nike.controls.update(), nike.renderer.render(nike.scene, nike.camera), setTimeout(function() {
        requestAnimationFrame(renderLoading)
    },
    100))
}

function stop() {
    stopped = !0,
    void 0 != sequencer && sequencer.pause(),
    nike.sequencerDisplay.dispose();
    for (var e = 0; e < assets.length; e++)"texture" == assets[e].type && (assets[e].asset.dispose(), assets[e].asset = void 0);
    for (var e = 0; e < nike.shoeGroups.length; e++) {
        for (var i = 0; i < nike.shoeGroups[e].children.length; i++) nike.shoeGroups[e].remove(nike.shoeGroups[e].children[i]),
        void 0 != nike.shoeGroups[e].children[i] && (nike.shoeGroups[e].children[i].geometry.dispose(), nike.shoeGroups[e].children[i].material.dispose());
        void 0 != nike.shoeGroups[e] && null != nike.shoeGroups[e] && nike.scene.remove(nike.shoeGroups[e])
    }
    $("#webGlContainer").remove(),
    console.log("memory freed... ")
}

function myResize() {
    nike.ui.height2 = $(window).height() / 2,
    nike.ui.width2 = $(window).width() / 2,
    $("#info_sequencer").css("top", nike.ui.height2 - 25 + "px"),
    $("#webGlContainer").css("width", window.innerWidth + "px"),
    $("#webGlContainer").css("height", window.innerHeight + "px");
    var e = window.innerWidth,
    i = window.innerHeight;
    nike.ui.ratio = e / i,
    null != nike.composer && (nike.composer.setSize(e, i), nike.composerEffects.setSize(e, i), nike.effectFXAA && (nike.effectFXAA.uniforms.resolution.value.set(1 / (e * nike.dpr), 1 / (i * nike.dpr)), nike.sceneTexturePass.uniforms.tDiffuse.value = nike.composer.renderTarget2));
    var t = .35 * i;
    $("#pad").css({
        width: t,
        height: t
    }),
    $("#loadinghider").css({
        width: t,
        height: t
    }),
    $("#padcursor").css({
        left: e / 2 - 16,
        top: i / 2 - 7
    }),
    $(".centered_full").each(function(t, n) {
        $(n).css("margin-left", e / 2 - parseInt($(n).css("width"), 10) / 2.1),
        $(n).css("margin-top", i / 2 - parseInt($(n).css("height"), 10) / 2)
    }),
    $("#pad").each(function(e, t) {
        $(t).css("margin-top", i / 2.08 - parseInt($(t).css("height"), 10) / 2.3)
    }),
    $(".centered_hor").each(function(i, t) {
        $(t).css("margin-left", e / 2 - parseInt($(t).css("width"), 10) / 2),
        $(t).css("left", 0)
    }),
    void 0 !== nike.camera && (nike.camera.aspect = e / i, nike.camera.updateProjectionMatrix(), nike.cameraBG && (nike.cameraBG.aspect = e / i, nike.cameraBG.updateProjectionMatrix())),
    void 0 !== loader && null !== loader.loadingCamera,
    void 0 != nike && null !== nike.renderer && nike.renderer.setSize(e, i)
}
var MODE_DEFAULT = 0,
MODE_SEQUENCER = 1,
MODE_DETAIL = 2,
MODE_INTRO = 3,
DEG2RAD = 3.14159 / 180,
drawLoader = !0,
stopped = !1,
started = !1,
nike = new _nikeApp,
modeSettings = new _modeSettings,
conf = new nikeConfig,
loader = new Loader;
$(document).ready(function() {
    detector.allowedZoetrope() || (window.location = "fallback/index.html"),
    loader.texturePath = "textures_low/",
    nike.init()
});